<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Blackjack Card Counter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
      transition: background 0.3s, color 0.3s;
    }
    .dark-mode {
      background: #1e1e1e;
      color: #ddd;
    }
    h1 {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .container {
      display: grid;
      grid-template-columns: 1fr 1fr 1.5fr;
      gap: 20px;
      margin-top: 20px;
    }
    .box {
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      transition: background 0.3s, color 0.3s;
    }
    .dark-mode .box {
      background: #2b2b2b;
      color: #ddd;
    }

    /* ðŸ”¹ Decks input styling */
    .decks-input {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .decks-input input {
      width: 60px;
      padding: 2px;
    }

    /* ðŸ”¹ Card styling for dealt + history */
    #dealt span,
    #history span {
      display: inline-block;
      background: #eee;
      margin: 3px;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .dark-mode #dealt span,
    .dark-mode #history span {
      background: #444;
      border-color: #666;
    }

    /* ðŸ”¹ Scrollable card boxes (Last 10 + History) */
    #dealt,
    #history,
    .history-box {
      max-height: 150px;
      overflow-y: auto;
      border: 1px solid #ddd;
      padding: 8px;
      border-radius: 6px;
      background: #fafafa;
      margin-bottom: 10px;
    }
    .dark-mode #dealt,
    .dark-mode #history,
    .dark-mode .history-box {
      background: #333;
      border-color: #555;
    }

    .card-buttons {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
    }
    button {
      padding: 10px;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: 0.2s;
    }
    .card-btn {
      background: #3498db;
      color: white;
    }
    .card-btn:hover { background: #2980b9; }
    .reset-btn {
      background: #e74c3c;
      color: white;
      margin-top: 10px;
      width: 100%;
    }
    .reset-btn:hover { background: #c0392b; }
    .hint {
      font-size: 14px;
      color: #555;
      margin-top: 10px;
    }
    .dark-mode .hint { color: #aaa; }

    /* ðŸ”¹ Middle column layout */
    .middle-column {
      display: flex;
      flex-direction: column;
    }

    /* ðŸ”¹ Bet spread box tweaks */
    .bet-spread-box {
      margin-top: 20px;       /* consistent gap above */
      flex-grow: 1;           /* stretch down */
      display: flex;
      flex-direction: column;
    }
    .bet-spread-box table {
      flex-grow: 1;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 12px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 4px;
      text-align: center;
    }
    .dark-mode th, .dark-mode td {
      border-color: #555;
    }
    th {
      background: #eee;
    }
    .dark-mode th {
      background: #444;
    }
    .negative { color: red; }
    .positive { color: green; }
    .zero { color: orange; }
    .bet-input {
      width: 60px;
      text-align: right;
    }
    .chart {
      max-height: 80vh;
      overflow-y: auto;
    }

    /* ðŸ”¹ Strategy chart colors */
    .H { background: #fff; }
    .S { background: #f1c40f; }
    .D { background: #2ecc71; }
    .Ds { background: #1abc9c; }    
    .Y { background: #2ecc71; }
    .N { background: #fff; }
    .YN { background: #27ae60; }
    .SUR { background: #16a085; color: white; }

    .legend span {
      margin-right: 10px;
      padding: 4px 6px;
      border-radius: 4px;
      font-size: 12px;
    }
</style>
</head>
<body>

  <h1>
    Blackjack Card Counter
    <label>
      <input type="checkbox" id="darkToggle"> Dark Mode
    </label>
  </h1>

  <!-- âœ… Add container wrapper -->
  <div class="container">

    <!-- Left -->
    <div class="box dealt-box">
      <h2>Dealt Cards</h2>
    
      <div class="decks-input">
        <label for="decks">Decks in Shoe:</label>
        <input type="number" id="decks" value="6" min="1">
      </div>
    
      <h2>Last 10</h2>
      <div class="card-list" id="dealt"></div>
    
      <h3>Running Count: <span id="count">0</span></h3>
      <h3>True Count: <span id="trueCount">0</span></h3>
    
      <h2>History</h2>
      <div id="history" class="history-box"></div>
    
      <button class="reset-btn" onclick="resetCounter()">Reset</button>
    </div>


    <!-- Middle -->
    <div class="middle-column">
      <div class="box">
        <h2>Select a Card</h2>
        <div class="card-buttons">
          <button class="card-btn" onclick="dealCard('2')">2</button>
          <button class="card-btn" onclick="dealCard('3')">3</button>
          <button class="card-btn" onclick="dealCard('4')">4</button>
          <button class="card-btn" onclick="dealCard('5')">5</button>
          <button class="card-btn" onclick="dealCard('6')">6</button>
          <button class="card-btn" onclick="dealCard('7')">7</button>
          <button class="card-btn" onclick="dealCard('8')">8</button>
          <button class="card-btn" onclick="dealCard('9')">9</button>
          <button class="card-btn" onclick="dealCard('10')">10</button>
          <button class="card-btn" onclick="dealCard('J')">J</button>
          <button class="card-btn" onclick="dealCard('Q')">Q</button>
          <button class="card-btn" onclick="dealCard('K')">K</button>
          <button class="card-btn" onclick="dealCard('A')">A</button>
        </div>
        <p class="hint">ðŸ’¡ Keyboard: 1=A, 2=2, â€¦, 9=9, 0=10/J/Q/K, R=Reset</p>
      </div>
    
      <div class="box bet-spread-box">
        <h2>Bet Spread</h2>
        <table>
          <thead><tr><th>Count</th><th>Bet Size</th></tr></thead>
          <tbody id="betTable"></tbody>
        </table>
      </div>
    </div>

    <!-- Right -->
    <div class="box chart">
      <h2>Basic Strategy</h2>

      <!-- Legend -->
      <h3>Legend</h3>
      <div class="legend">
        <span class="H">H = Hit</span>
        <span class="S">S = Stand</span>
        <span class="D">D = Double</span>
        <span class="Ds">Ds = Double/Stand</span>
        <span class="Y">Y = Split</span>
        <span class="N">N = Donâ€™t Split</span>
        <span class="YN">Y/N = Split if DAS</span>
        <span class="SUR">SUR = Surrender</span>
      </div>

      <!-- Hard Totals -->
      <h3>Hard Totals</h3>
      <table>
        <thead>
          <tr>
            <th>Player</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>A</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>17+</td><td colspan="10" class="S">S</td></tr>
          <tr><td>16</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>15</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>14</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>13</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>12</td><td class="H">H</td><td class="H">H</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>11</td><td colspan="10" class="D">D</td></tr>
          <tr><td>10</td><td colspan="5" class="D">D</td><td colspan="5" class="H">H</td></tr>
          <tr><td>9</td><td class="H">H</td><td class="D">D</td><td class="D">D</td><td class="D">D</td><td class="D">D</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>8-</td><td colspan="10" class="H">H</td></tr>
        </tbody>
      </table>

      <!-- Soft Totals -->
      <h3>Soft Totals</h3>
      <table>
        <thead>
          <tr><th>Player</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>A</th></tr>
        </thead>
        <tbody>
          <tr><td>A,9</td><td colspan="10" class="S">S</td></tr>
          <tr><td>A,8</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="Ds">Ds</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td><td class="S">S</td></tr>
          <tr><td>A,7</td><td class="Ds">Ds</td><td class="Ds">Ds</td><td class="Ds">Ds</td><td class="Ds">Ds</td><td class="Ds">Ds</td><td class="S">S</td><td class="S">S</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>A,6</td><td class="H">H</td><td class="D">D</td><td class="D">D</td><td class="D">D</td><td class="D">D</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>A,5</td><td class="H">H</td><td class="H">H</td><td class="D">D</td><td class="D">D</td><td class="D">D</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>A,4</td><td class="H">H</td><td class="H">H</td><td class="D">D</td><td class="D">D</td><td class="D">D</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>A,3</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="D">D</td><td class="D">D</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
          <tr><td>A,2</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="D">D</td><td class="D">D</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td><td class="H">H</td></tr>
        </tbody>
      </table>

      <!-- Pair Splitting -->
      <h3>Pair Splitting</h3>
      <table>
        <thead>
          <tr><th>Pair</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>A</th></tr>
        </thead>
        <tbody>
          <tr><td>A,A</td><td colspan="10" class="Y">Y</td></tr>
          <tr><td>10,10</td><td colspan="10" class="N">N</td></tr>
          <tr><td>9,9</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="N">N</td><td class="Y">Y</td><td class="Y">Y</td><td class="N">N</td><td class="N">N</td></tr>
          <tr><td>8,8</td><td colspan="10" class="Y">Y</td></tr>
          <tr><td>7,7</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="N">N</td><td class="N">N</td><td class="N">N</td><td class="N">N</td></tr>
          <tr><td>6,6</td><td class="YN">Y/N</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="N">N</td><td class="N">N</td><td class="N">N</td><td class="N">N</td><td class="N">N</td></tr>
          <tr><td>5,5</td><td colspan="10" class="N">N</td></tr>
          <tr><td>4,4</td><td class="N">N</td><td class="N">N</td><td class="N">N</td><td class="YN">Y/N</td><td class="YN">Y/N</td><td class="Y">Y</td><td class="N">N</td><td class="N">N</td><td class="N">N</td><td class="N">N</td></tr>
          <tr><td>3,3</td><td class="YN">Y/N</td><td class="YN">Y/N</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="N">N</td><td class="N">N</td><td class="N">N</td><td class="N">N</td></tr>
          <tr><td>2,2</td><td class="YN">Y/N</td><td class="YN">Y/N</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="Y">Y</td><td class="N">N</td><td class="N">N</td><td class="N">N</td><td class="N">N</td></tr>
        </tbody>
      </table>

      <!-- Surrender -->
      <h3>Surrender</h3>
      <table>
        <thead><tr><th>Player</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th><th>9</th><th>10</th><th>A</th></tr></thead>
        <tbody>
          <tr><td>16</td><td colspan="6"></td><td></td><td class="SUR">SUR</td><td class="SUR">SUR</td><td class="SUR">SUR</td></tr>
          <tr><td>15</td><td colspan="8"></td><td class="SUR">SUR</td><td></td></tr>
          <tr><td>14</td><td colspan="10"></td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    const countValues = {
      "2": 1, "3": 1, "4": 1, "5": 1, "6": 1,
      "7": 0, "8": 0, "9": 0,
      "10": -1, "J": -1, "Q": -1, "K": -1, "A": -1
    };
    let runningCount = 0;
    let dealtCards = [];
    let historyCards = [];

    function renderCards() {
      const dealtDiv = document.getElementById("dealt");
      const historyDiv = document.getElementById("history");
      dealtDiv.innerHTML = "";
      historyDiv.innerHTML = "";

      dealtCards.forEach(card => {
        const span = document.createElement("span");
        span.textContent = card;
        dealtDiv.appendChild(span);
      });

      historyCards.forEach(card => {
        const span = document.createElement("span");
        span.textContent = card;
        historyDiv.appendChild(span);
      });

      // Auto-scroll history to bottom
      historyDiv.scrollTop = historyDiv.scrollHeight;
    }

    function calculateTrueCount() {
      const decks = parseFloat(document.getElementById("decks").value) || 1;
      return (runningCount / decks).toFixed(2);
    }

    function dealCard(card) {
      dealtCards.push(card);
      if (dealtCards.length > 10) historyCards.push(dealtCards.shift());
    
      runningCount += countValues[card];
      document.getElementById("count").textContent = runningCount;
      document.getElementById("trueCount").textContent = calculateTrueCount();
    
      renderCards();
    }

    function resetCounter() {
      runningCount = 0;
      dealtCards = [];
      historyCards = [];
      document.getElementById("count").textContent = "0";
      document.getElementById("trueCount").textContent = "0";
      renderCards();
    }

    document.addEventListener("keydown", (event) => {
      switch (event.key) {
        case "1": dealCard("A"); break;
        case "2": dealCard("2"); break;
        case "3": dealCard("3"); break;
        case "4": dealCard("4"); break;
        case "5": dealCard("5"); break;
        case "6": dealCard("6"); break;
        case "7": dealCard("7"); break;
        case "8": dealCard("8"); break;
        case "9": dealCard("9"); break;
        case "0": dealCard("10"); break;
        case "r": case "R": resetCounter(); break;
      }
    });

    const betTable = document.getElementById("betTable");
    for (let i = -3; i <= 5; i++) {
      const row = document.createElement("tr");
      const indexCell = document.createElement("td");
      indexCell.textContent = i;
      if (i < 0) indexCell.classList.add("negative");
      if (i === 0) indexCell.classList.add("zero");
      if (i > 0) indexCell.classList.add("positive");
      const betCell = document.createElement("td");
      const input = document.createElement("input");
      input.type = "number"; input.value = i <= 0 ? 0 : i * 10;
      input.classList.add("bet-input");
      betCell.appendChild(input);
      row.appendChild(indexCell);
      row.appendChild(betCell);
      betTable.appendChild(row);
    }
    renderCards();

    document.getElementById("darkToggle").addEventListener("change", (e) => {
      document.body.classList.toggle("dark-mode", e.target.checked);
    });
  </script>
</body>
</html>
